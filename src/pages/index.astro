---
import BaseLayout from '../layouts/BaseLayout.astro';
import Hero from '../components/Hero.astro';
import Schema from '../components/Schema.astro';
---

<BaseLayout
  title="Postgres Is Enough"
  description="A curated directory of PostgreSQL extensions and tools. Replace Redis, Elasticsearch, Kafka, and MongoDB with one database you already know."
>
  <Fragment slot="head">
    <Schema
      item={{
        '@type': 'WebSite',
        name: 'Postgres Is Enough',
        url: Astro.site?.href,
        description: 'A curated directory of PostgreSQL extensions and tools for developers who want to simplify their stack.',
        potentialAction: {
          '@type': 'SearchAction',
          target: `${Astro.site?.href}tools?q={search_term_string}`,
          'query-input': 'required name=search_term_string',
        },
      }}
    />
  </Fragment>

  <Hero />

  <!-- The Gist section -->
  <section class="py-16 px-4 bg-white" id="the-gist">
    <div class="max-w-4xl mx-auto">
      <h2 class="font-display text-2xl sm:text-3xl font-bold text-center mb-8">
        The Gist
      </h2>

      <div class="prose prose-lg max-w-none text-text-muted space-y-6">
        <p>
          It started with <a href="https://gist.github.com/cpursley/c8fb81fe8a7e5df038158bdfe0f06dbb" target="_blank" class="text-pg-blue underline hover:no-underline">a gist</a> and a lively
          <a href="https://news.ycombinator.com/item?id=39273954" target="_blank" class="text-[#FF6600] hover:underline">Hacker News thread</a>.
          The premise was simple: Postgres isn't the best at everything, but it's good enough for most things. In practice, most teams are running too many microservices and databases. It's all premature optimization. More operational overhead, more maintenance burden, more monitoring complexity, higher costs, harder tracing, and longer debugging sessions.
        </p>

        <h3 class="font-display font-bold text-text text-xl mt-10 mb-4">The Typical Pattern</h3>

        <p>
          You need caching, so you add Redis. Full-text search? Bolt-on Elasticsearch.
          Background jobs? Another Redis, or maybe Sidekiq. Documents with flexible schemas? Default to MongoDB.
          Analytics? Snowflake. Events? Reach for Kafka. Before long, your "simple" application talks to seven
          different data stores and microservices, each with its own deployment, backup strategy, failure modes, and 3 AM pages when they stop talking to each other.
          Each system adds operational surface area: monitoring, alerting, failover testing, security patching, version upgrades.
        </p>

        <!-- Architecture Comparison Diagram -->
        <div class="my-12 grid md:grid-cols-2 gap-8">
          <!-- Complex Setup -->
          <div class="bg-gray-50 rounded-xl p-6">
            <h3 class="font-display font-bold text-center text-text mb-6">The "Best Tool for the Job"</h3>
            <div class="flex flex-col items-center">
              <div class="bg-blue-500 text-white px-6 py-3 rounded-lg font-medium mb-4">Application</div>
              <div class="flex flex-wrap justify-center gap-1 mb-3">
                <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" /></svg>
                <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" /></svg>
                <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" /></svg>
                <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" /></svg>
                <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" /></svg>
                <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" /></svg>
                <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" /></svg>
                <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" /></svg>
                <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" /></svg>
              </div>
              <div class="grid grid-cols-3 gap-2 text-xs text-center">
                <div class="text-white px-2 py-2 rounded" style="background-color: #D82C20;">Redis</div>
                <div class="text-white px-2 py-2 rounded" style="background-color: #336791;">Postgres</div>
                <div class="text-white px-2 py-2 rounded" style="background-color: #005571;">Elastic</div>
                <div class="text-white px-2 py-2 rounded" style="background-color: #00684A;">MongoDB</div>
                <div class="text-white px-2 py-2 rounded" style="background-color: #29B5E8;">Snowflake</div>
                <div class="text-white px-2 py-2 rounded" style="background-color: #000000;">Kafka</div>
                <div class="text-white px-2 py-2 rounded" style="background-color: #1C17FF;">Pinecone</div>
                <div class="text-white px-2 py-2 rounded" style="background-color: #D2322D;">Sidekiq</div>
                <div class="text-white px-2 py-2 rounded" style="background-color: #9B2AFF;">InfluxDB</div>
              </div>
              <p class="text-xs text-text-muted mt-4 text-center">Multiple systems to operate and monitor</p>
            </div>
          </div>

          <!-- Just Postgres -->
          <div class="bg-blue-50 rounded-xl p-6 border-2 border-pg-blue">
            <h3 class="font-display font-bold text-center text-text mb-6">With Postgres</h3>
            <div class="flex flex-col items-center">
              <div class="bg-blue-500 text-white px-6 py-3 rounded-lg font-medium mb-4">Application</div>
              <div class="flex flex-wrap justify-center gap-2 mb-3">
                <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" /></svg>
                <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" /></svg>
              </div>
              <div class="bg-white text-pg-blue px-8 py-4 rounded-lg font-medium text-lg flex items-center gap-2 border-2 border-pg-blue">
                <img src="/postgres-logo.svg" alt="" class="h-6 w-6" aria-hidden="true" />
                PostgreSQL
              </div>
              <p class="text-xs text-text-muted mt-4 text-center">One database. One backup strategy. One set of failure modes.</p>
            </div>
          </div>
        </div>

        <h3 class="font-display font-bold text-text text-xl mt-10 mb-4">"But Postgres Isn't Webscale™!"</h3>

        <p>
          We hear this argument all the time. But what percentage of software projects actually ever reach so-called "webscale"? About 0.3%? For your stealth startup or saas, should you really be burning your <a href="https://mattrickard.com/innovation-tokens" target="_blank">innovation tokens</a> on multiple microservices and databases instead of the actual problem at hand?
        </p>

        <p>
          Even still, there are plenty of large Postgres deployments (Notion, Netflix, Instagram, etc). If companies serving millions of users trust "boring" technology, your startup can probably handle ten thousand users without a seven-database architecture. Besides, if you ever truly get to webscale and tap out Postgre's capabilities, you can just add the pieces in as needed, when truly needed.
        </p>

        <h3 class="font-display font-bold text-text text-xl mt-10 mb-4">Maybe Postgres Is Enough</h3>

        <p>Before reaching for another database, see if you can accomplish it with what Postgres already offers:</p>

        <div class="overflow-x-auto my-8">
          <table class="w-full text-sm border-collapse">
            <thead>
              <tr class="border-b-2 border-gray-200">
                <th class="text-left py-3 pr-4 font-display font-bold text-text">You need...</th>
                <th class="text-left py-3 pr-4 font-display font-bold text-text">You reach for...</th>
                <th class="text-left py-3 font-display font-bold text-text">But Postgres has...</th>
              </tr>
            </thead>
            <tbody class="text-text-muted">
              <tr class="border-b border-gray-100">
                <td class="py-3 pr-4">Caching</td>
                <td class="py-3 pr-4">Redis, Memcached</td>
                <td class="py-3"><a href="/tools?category=caching" class="text-pg-blue hover:underline">UNLOGGED tables, materialized views →</a></td>
              </tr>
              <tr class="border-b border-gray-100">
                <td class="py-3 pr-4">Job queues</td>
                <td class="py-3 pr-4">Redis + Sidekiq, RabbitMQ</td>
                <td class="py-3"><a href="/tools?category=queues" class="text-pg-blue hover:underline">SKIP LOCKED, pgmq, pgflow →</a></td>
              </tr>
              <tr class="border-b border-gray-100">
                <td class="py-3 pr-4">Full-text search</td>
                <td class="py-3 pr-4">Elasticsearch, Algolia</td>
                <td class="py-3"><a href="/tools?category=search" class="text-pg-blue hover:underline">tsvector, pg_trgm, ParadeDB →</a></td>
              </tr>
              <tr class="border-b border-gray-100">
                <td class="py-3 pr-4">Document store</td>
                <td class="py-3 pr-4">MongoDB, CouchDB</td>
                <td class="py-3"><a href="/tools?category=documents" class="text-pg-blue hover:underline">JSONB, FerretDB →</a></td>
              </tr>
              <tr class="border-b border-gray-100">
                <td class="py-3 pr-4">Vector search / AI</td>
                <td class="py-3 pr-4">Pinecone, Weaviate</td>
                <td class="py-3"><a href="/tools?category=vectors" class="text-pg-blue hover:underline">pgvector, pgvectorscale →</a></td>
              </tr>
              <tr class="border-b border-gray-100">
                <td class="py-3 pr-4">Time-series data</td>
                <td class="py-3 pr-4">InfluxDB, TimescaleDB</td>
                <td class="py-3"><a href="/tools?category=time-series" class="text-pg-blue hover:underline">TimescaleDB, pg_partman →</a></td>
              </tr>
              <tr class="border-b border-gray-100">
                <td class="py-3 pr-4">Analytics / OLAP</td>
                <td class="py-3 pr-4">Snowflake, BigQuery</td>
                <td class="py-3"><a href="/tools?category=analytics" class="text-pg-blue hover:underline">pg_analytics, DuckDB integration →</a></td>
              </tr>
              <tr class="border-b border-gray-100">
                <td class="py-3 pr-4">Graph database</td>
                <td class="py-3 pr-4">Neo4j, Neptune</td>
                <td class="py-3"><a href="/tools?category=graphs" class="text-pg-blue hover:underline">Apache AGE, recursive CTEs →</a></td>
              </tr>
              <tr>
                <td class="py-3 pr-4">Geospatial</td>
                <td class="py-3 pr-4">Specialized GIS systems</td>
                <td class="py-3"><a href="/tools?category=geo" class="text-pg-blue hover:underline">PostGIS →</a></td>
              </tr>
            </tbody>
          </table>
        </div>

        <h3 class="font-display font-bold text-text text-xl mt-10 mb-4">When You Actually Need Something Else</h3>

        <p>
          This isn't about dogma. Sometimes you genuinely need specialized infrastructure. But the bar
          should be high: only after pushing Postgres to its limits, documenting why it
          was insufficient, and accepting the operational cost of the alternative. Until then, every system you add is a bet that the benefit outweighs years of maintenance,
          monitoring, and debugging.
        </p>
      </div>

      <div class="mt-10 text-center">
        <a
          href="/resources"
          class="text-pg-blue hover:text-pg-blue-dark font-medium inline-flex items-center gap-1"
        >
          Read the essays that shaped this philosophy
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
          </svg>
        </a>
      </div>
    </div>
  </section>
</BaseLayout>
